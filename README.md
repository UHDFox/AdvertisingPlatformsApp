# AdvertisingPlatformsApp


Тестовое задание на вакансию ".NET (Junior)" компании "Effect mobile". Проект представляет собой веб-сервис, который позволяет  искать рекламные площадки по локациям с использованием ASP.NET Core. Сервис предоставляет два метода REST API:

Загрузка рекламных площадок из файла — полностью перезаписывает данные о рекламных площадках.
Поиск рекламных площадок по заданной локации — возвращает список всех рекламных площадок, соответствующих указанной локации.
Проект использует in-memory хранилище для данных и оптимизирован для быстрого поиска площадок по регионам.

---

## Структура данных

Рекламные площадки загружаются из текстового файла в формате:

```
<площадка>:<локации>
```
Приведем пример:
```
Яндекс.Директ:/ru
Ревдинский рабочий:/ru/svrd/revda,/ru/svrd/pervik
Газета уральских москвичей:/ru/msk,/ru/permobl,/ru/chelobl
Крутая реклама:/ru/svrd
```
## API

### 1. Загрузка рекламных площадок из файла

**POST /api/advertising/load**  
Загружает данные о рекламных площадках из файла. Перезаписывает все предыдущие данные.

**Параметры:**
- **file**: Файл с данными о рекламных площадках.

**Пример запроса**:

```bash
POST /api/advertising/load
Content-Type: multipart/form-data

file: <file>
```

Ответ:
200 OK — список рекламных площадок, подходящих для заданной локации.
400 Bad Request — если локация не указана или указана некорректно.

### 2. Получение рекламных площадок по региону

**GET /api/advertising/search**  
Возвращает список рекламных площадок, которые подходят для указанного региона.

**Параметры запроса:**
- **region**: Регион, для которого необходимо найти подходящие рекламные площадки. Регион должен быть указан в пути, например: `/ru/msk`.

**Пример запроса:**

```bash
GET /api/advertising/search?region=/ru/msk

**Пример ответа от сервера**:
```json
[
    {
        "companyName": "Яндекс.Директ",
        "regions": ["/ru"]
    },
    {
        "companyName": "Газета уральских москвичей",
        "regions": ["/ru/msk", "/ru/permobl", "/ru/chelobl"]
    }
]
```

## Развертывание

#### 1. Клонирование репозитория

Сначала клонируйте репозиторий на вашу машину с помощью следующей команды:

```bash
git clone https://github.com/UHDFox/AdvertisingPlatformsApp.git
cd AdvertisingPlatformsApp
```

#### 2. Установка зависимостей
Для работы с проектом необходимо иметь установленную версию .NET 7.0 или выше.

В IDE выполните 
```
dotnet restore
```

#### 3. Сборка проекта

Используйте команду 
```
dotnet build
```

#### 4. Запуск проекта и доступ
Проект запускается при помощи команды
```
dotnet run
```

он будет доступен по адресу
```curl
http://localhost:5000
```

## Тесты

В проекте реализованы юнит тесты при помощи `Moq` и `XUnit`.
Тесты находятся в проекте `AdvertisingPlatformsApp.Tests`.

### Запуск тестов

Чтобы запустить тесты, выполните следующую команду в корневой папке проекта:

```bash
dotnet test
```


